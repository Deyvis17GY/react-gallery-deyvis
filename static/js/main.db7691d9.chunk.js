(this["webpackJsonpreact-gallery"]=this["webpackJsonpreact-gallery"]||[]).push([[0],{37:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(26),r=a.n(s),i=(a(37),a(3)),o=a(6),l=a.n(o),u=a(10),d=a(8),j=a(32),b=a(15),p=a(27),m=a.n(p).a.create({baseURL:"https://api-spaces-gallery.herokuapp.com/",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),g=a(1),O=function(){var e=Object(i.g)(),t=Object(i.f)(),a=Object(c.useState)({title:"",url:"",_id:""}),n=Object(d.a)(a,2),s=n[0],r=n[1],o=Object(c.useState)(!1),p=Object(d.a)(o,2),O=p[0],h=p[1],f=Object(c.useState)(!1),x=Object(d.a)(f,2),v=x[0],N=x[1],y=Object(c.useState)("container_image"),w=Object(d.a)(y,2),k=w[0],C=w[1],S=Object(c.useState)(!1),A=Object(d.a)(S,2),_=A[0],D=A[1],F=function(){var a=Object(u.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return N(!0),a.next=3,m.delete("/api/images/".concat(e.id));case 3:N(!1),t.push("/");case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.get("/api/images/".concat(e.id));case 2:a=t.sent,r(a.data),h(!0);case 5:case"end":return t.stop()}}),t)})))()}),[e.id]),Object(g.jsxs)("div",{className:"container_detail card bg-dark",children:[Object(g.jsxs)("div",{className:k,children:[O?Object(g.jsx)("img",{src:s.url,alt:s.title,className:"imgDetail"}):Object(g.jsx)("p",{className:"text-center",children:"Loading..."}),O&&Object(g.jsx)(j.a,{onClick:function(){D(!_),C("container_image"===k?"container_fullscreen":"container_image")},className:_?"compress":"fullscreen",icon:_?b.a:b.b})]}),Object(g.jsxs)("div",{className:"card-body w-100",children:[Object(g.jsx)("h3",{className:"text-center",children:s.title}),Object(g.jsx)("button",{disabled:v,className:"btn btn-outline-danger",onClick:F,children:"Delete"})]})]})},h=a(30),f=a.n(h),x=a(31),v=(a(64),function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(d.a)(s,2),o=r[0],j=r[1],b=Object(c.useState)(0),p=Object(d.a)(b,2),O=p[0],h=p[1],v=Object(c.useState)(!1),N=Object(d.a)(v,2),y=N[0],w=N[1],k=Object(i.f)(),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upload successfully ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";new x.a({status:t,title:e,text:"",effect:"slide",speed:300,customClass:"color-text",customIcon:null,showIcon:!0,showCloseButton:!1,autoclose:!0,autotimeout:1e3,gap:20,distance:20,type:2,position:"bottom x-center",customWrapper:""})},S=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=new FormData,n=["image/jpeg","image/jpg","image/png"],e.prev=3,w(!0),a){e.next=9;break}return w(!1),C("Please select an image","error"),e.abrupt("return");case 9:if(s=a.type,n.includes(s)){e.next=14;break}return w(!1),C("Please select a valid image file","error"),e.abrupt("return");case 14:new f.a(a,{quality:.5,success:function(e){return Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new File([e],e.name,{type:e.type,lastModified:Date.now(),size:e.size}),c.append("image",a),c.append("title",o),t.next=5,m.post("/api/images/upload",c,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t="".concat(Math.round(e.loaded/e.total*100));h(t)}});case 5:200===t.sent.status&&(w(!1),C(),k.push("/"));case 7:case"end":return t.stop()}}),t)})))()},error:function(e){console.error(e.message),C(e.message,"error")}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(g.jsxs)("div",{className:"card bg-dark text-light rounded-0 p-4",children:[y&&Object(g.jsx)("div",{className:"progress rounded-0",children:Object(g.jsx)("div",{className:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:{width:"".concat(O,"%")},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)("h3",{className:"card-title",children:"Upload Image"}),Object(g.jsxs)("form",{onSubmit:S,children:[Object(g.jsx)("input",{type:"text",className:"form-control bg-dark text-light my-3 rounded-0",placeholder:"Write a title for your photo",onChange:function(e){return j(e.target.value)}}),Object(g.jsx)("input",{type:"file",className:"form-control bg-dark text-light rounded-0",onChange:function(e){var t=e.target.files[0];n(t)},accept:"image/*"}),Object(g.jsx)("div",{className:"my-3",children:Object(g.jsx)("button",{disabled:y,className:"btn btn-success rounded-0 w-100",children:"Upload"})})]})]})]})})}),N=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(i.f)();return Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/api/images");case 2:t=e.sent,n(t?t.data:[]);case 4:case"end":return e.stop()}}),e)})))()}),[]),a&&a.length>0?Object(g.jsx)("div",{className:"container-image",children:a.map((function(e,t){return Object(g.jsx)("div",{className:"container-image-item",onClick:function(){return s.push("/images/".concat(e._id))},children:Object(g.jsx)("img",{title:e.title,src:e.url,alt:e.title,className:"w-100"})},t)}))}):Object(g.jsx)("h2",{children:"Loading..."})},y=(a(65),a(66),a(9)),w=function(){var e=Object(c.useRef)(null);return Object(g.jsx)("div",{children:Object(g.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(y.b,{className:"navbar-brand",to:"/react-gallery-deyvis",children:"React Gallery"}),Object(g.jsx)("button",{onClick:function(){e.current.classList.toggle("show")},className:"navbar-toggler",children:Object(g.jsx)("span",{className:"navbar-toggler-icon"})}),Object(g.jsx)("div",{ref:e,className:"collapse navbar-collapse",id:"navbarNav",children:Object(g.jsx)("ul",{className:"navbar-nav ms-auto",children:Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(y.b,{className:"nav-link active","aria-current":"page",to:"/upload",children:"Upload an Image"})})})})]})})})};var k=function(){return console.log("%c\ud83d\ude80 ~ file: App.js ~ line 13 ~ App ~ version 0.0.5","font-size:12px"),Object(g.jsxs)("div",{className:"bg-dark text-light",children:[Object(g.jsx)(w,{}),Object(g.jsx)("div",{className:"container p-4",children:Object(g.jsxs)(i.c,{children:[Object(g.jsx)(i.a,{exact:!0,path:"/react-gallery-deyvis",component:N}),Object(g.jsx)(i.a,{path:"/upload",component:v}),Object(g.jsx)(i.a,{path:"/images/:id",component:O})]})})]})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,68)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(g.jsxs)(y.a,{children:[Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(k,{})}),","]}),document.getElementById("root")),C()}},[[67,1,2]]]);
//# sourceMappingURL=main.db7691d9.chunk.js.map