(this["webpackJsonpreact-gallery"]=this["webpackJsonpreact-gallery"]||[]).push([[0],{37:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(26),r=a.n(s),i=(a(37),a(3)),o=a(6),l=a.n(o),u=a(10),d=a(8),j=a(32),b=a(15),p=a(27),O=a.n(p).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/react-gallery-deyvis",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENDPOINT,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),m=a(1),g=function(){var e=Object(i.g)(),t=Object(i.f)(),a=Object(c.useState)({title:"",url:"",_id:""}),n=Object(d.a)(a,2),s=n[0],r=n[1],o=Object(c.useState)(!1),p=Object(d.a)(o,2),g=p[0],f=p[1],h=Object(c.useState)(!1),v=Object(d.a)(h,2),x=v[0],N=v[1],S=Object(c.useState)("container_image"),_=Object(d.a)(S,2),y=_[0],w=_[1],C=Object(c.useState)(!1),T=Object(d.a)(C,2),k=T[0],E=T[1],P=function(){var a=Object(u.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return N(!0),a.next=3,O.delete("/api/images/".concat(e.id));case 3:N(!1),t.push("/");case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.get("/api/images/".concat(e.id));case 2:a=t.sent,r(a.data),f(!0);case 5:case"end":return t.stop()}}),t)})))()}),[e.id]),Object(m.jsxs)("div",{className:"container_detail card bg-dark",children:[Object(m.jsxs)("div",{className:y,children:[g?Object(m.jsx)("img",{src:s.url,alt:s.title,className:"imgDetail"}):Object(m.jsx)("p",{className:"text-center",children:"Loading..."}),g&&Object(m.jsx)(j.a,{onClick:function(){E(!k),w("container_image"===y?"container_fullscreen":"container_image")},className:k?"compress":"fullscreen",icon:k?b.a:b.b})]}),Object(m.jsxs)("div",{className:"card-body w-100",children:[Object(m.jsx)("h3",{className:"text-center",children:s.title}),Object(m.jsx)("button",{disabled:x,className:"btn btn-outline-danger",onClick:P,children:"Delete"})]})]})},f=a(30),h=a.n(f),v=a(31),x=(a(64),function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(d.a)(s,2),o=r[0],j=r[1],b=Object(c.useState)(0),p=Object(d.a)(b,2),g=p[0],f=p[1],x=Object(c.useState)(!1),N=Object(d.a)(x,2),S=N[0],_=N[1],y=Object(i.f)(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upload successfully ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";new v.a({status:t,title:e,text:"",effect:"slide",speed:300,customClass:"color-text",customIcon:null,showIcon:!0,showCloseButton:!1,autoclose:!0,autotimeout:1e3,gap:20,distance:20,type:2,position:"bottom x-center",customWrapper:""})},C=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=new FormData,n=["image/jpeg","image/jpg","image/png"],e.prev=3,_(!0),a){e.next=9;break}return _(!1),w("Please select an image","error"),e.abrupt("return");case 9:if(s=a.type,n.includes(s)){e.next=14;break}return _(!1),w("Please select a valid image file","error"),e.abrupt("return");case 14:new h.a(a,{quality:.5,success:function(e){return Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new File([e],e.name,{type:e.type,lastModified:Date.now(),size:e.size}),c.append("image",a),c.append("title",o),t.next=5,O.post("/api/images/upload",c,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t="".concat(Math.round(e.loaded/e.total*100));f(t)}});case 5:200===t.sent.status&&(_(!1),w(),y.push("/"));case 7:case"end":return t.stop()}}),t)})))()},error:function(e){console.error(e.message),w(e.message,"error")}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(m.jsxs)("div",{className:"card bg-dark text-light rounded-0 p-4",children:[S&&Object(m.jsx)("div",{className:"progress rounded-0",children:Object(m.jsx)("div",{className:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:{width:"".concat(g,"%")},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h3",{className:"card-title",children:"Upload Image"}),Object(m.jsxs)("form",{onSubmit:C,children:[Object(m.jsx)("input",{type:"text",className:"form-control bg-dark text-light my-3 rounded-0",placeholder:"Write a title for your photo",onChange:function(e){return j(e.target.value)}}),Object(m.jsx)("input",{type:"file",className:"form-control bg-dark text-light rounded-0",onChange:function(e){var t=e.target.files[0];n(t)},accept:"image/*"}),Object(m.jsx)("div",{className:"my-3",children:Object(m.jsx)("button",{disabled:S,className:"btn btn-success rounded-0 w-100",children:"Upload"})})]})]})]})})}),N=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(i.f)();return Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/api/images");case 2:t=e.sent,n(t?t.data:[]);case 4:case"end":return e.stop()}}),e)})))()}),[]),console.debug("ImageGallery",Object({NODE_ENV:"production",PUBLIC_URL:"/react-gallery-deyvis",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENDPOINT),a&&a.length>0?Object(m.jsx)("div",{className:"container-image",children:a.map((function(e,t){return Object(m.jsx)("div",{className:"container-image-item",onClick:function(){return s.push("/images/".concat(e._id))},children:Object(m.jsx)("img",{title:e.title,src:e.url,alt:e.title,className:"w-100"})},t)}))}):Object(m.jsx)("h2",{children:"Loading..."})},S=(a(65),a(66),a(9)),_=function(){var e=Object(c.useRef)(null);return Object(m.jsx)("div",{children:Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(S.b,{className:"navbar-brand",to:"/",children:"React Gallery"}),Object(m.jsx)("button",{onClick:function(){e.current.classList.toggle("show")},className:"navbar-toggler",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{ref:e,className:"collapse navbar-collapse",id:"navbarNav",children:Object(m.jsx)("ul",{className:"navbar-nav ms-auto",children:Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(S.b,{className:"nav-link active","aria-current":"page",to:"/upload",children:"Upload an Image"})})})})]})})})};var y=function(){return console.log("%c\ud83d\ude80 ~ file: App.js ~ line 13 ~ App ~ version 0.0.5","font-size:12px"),Object(m.jsxs)("div",{className:"bg-dark text-light",children:[Object(m.jsx)(_,{}),Object(m.jsx)("div",{className:"container p-4",children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{exact:!0,path:"/",component:N}),Object(m.jsx)(i.a,{path:"/upload",component:x}),Object(m.jsx)(i.a,{path:"/images/:id",component:g})]})})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,68)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(m.jsxs)(S.a,{children:[Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(y,{})}),","]}),document.getElementById("root")),w()}},[[67,1,2]]]);
//# sourceMappingURL=main.16237931.chunk.js.map